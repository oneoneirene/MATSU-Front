import{Q as C}from"./QSpace.e470f1df.js";import{u as U,r as S,h as b,o as n,i as g,w as u,P as v,S as p,g as t,a as f,a7 as q,d as i,Z as m,W as B,l as c,k as x,j as F}from"./index.0e7b7a90.js";import{Q as h}from"./QCard.0e4124b2.js";import{Q as D}from"./QFile.5d9d6c11.js";import{Q as E}from"./QForm.523e4d1f.js";import{Q as $}from"./QPage.6de8f4eb.js";const A={class:"container"},I={class:"row q-mt-none q-mt-lg-xl"},N={class:"col-12 col-lg-10"},P={class:"flex items-center text-center q-mb-lg q-mt-lg q-mt-lg-none"},j={key:0,class:"text-h4 text-weight-medium"},M={key:1,class:"text-h4 text-weight-medium"},W=t("div",{class:"text-body1 q-mb-md"},"\u500B\u4EBA\u8CC7\u8A0A\u9801\u9762",-1),Z=t("div",{class:"text-subtitle1 text-weight-bold"},"ID:",-1),z={class:"text-subtitle1 q-mb-md"},G=t("div",{class:"text-subtitle1 text-weight-bold"},"\u5E33\u865F:",-1),H={class:"text-subtitle1 q-mb-md"},J=t("div",{class:"text-subtitle1 text-weight-bold"},"\u66B1\u7A31:",-1),K={class:"text-subtitle1 q-mb-md"},L=t("div",{class:"text-subtitle1 text-weight-bold"},"\u96FB\u5B50\u90F5\u4EF6\u4FE1\u7BB1:",-1),O={class:"text-subtitle1 q-mb-md"},R={class:"q-my-xxl"},T=t("div",{class:"text-subtitle1 text-weight-medium"},"ID:",-1),X=t("div",{class:"text-subtitle1 text-weight-medium"},"\u5E33\u865F:",-1),Y=t("div",{class:"text-subtitle1 text-weight-medium"},"\u66B1\u7A31:",-1),ee=t("div",{class:"text-subtitle1 text-weight-medium"},"\u96FB\u5B50\u90F5\u4EF6\u4FE1\u7BB1:",-1),te=t("div",{class:"text-subtitle1 text-weight-medium"},"\u7167\u7247\u4E0A\u50B3:",-1),se={class:"q-my-xxl"},ue={__name:"UserinfoPage",setup(le){const k=U(),{logout:w}=k,d=S(!0),y=()=>{d.value?d.value=!1:d.value=!0},r=b({required(l){return!!l||"\u5FC5\u586B"}}),o=b({_id:"",account:"",email:"",name:"",image:null,idx:-1});console.log(o.name);const s=b({_id:"",account:"",email:"",name:"",image:null,submitting:!1,idx:-1}),V=()=>{d.value=!1,s._id=o._id,s.name=o.name,s.account=o.account,s.email=o.email,s.image=o.image},_=async()=>{try{const{data:l}=await v.get("/users");o._id=l.result._id,o.account=l.result.account,o.email=l.result.email,o.name=l.result.name,o.image=l.result.image}catch(l){console.log(l),p.fire({icon:"error",title:"\u5931\u6557",text:l.isAxiosError?l.response.data.message:l.message})}};_();const Q=async()=>{console.log(s);const l=new FormData;for(const e in s)l.append(e,s[e]);try{const{data:e}=await v.patch("/users",l);p.fire({icon:"success",title:"\u6210\u529F",text:"\u7DE8\u8F2F\u6210\u529F"}),_(),d.value=!0}catch(e){p.fire({icon:"error",title:"\u7DE8\u8F2F\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message})}};return _(),(l,e)=>(n(),g($,null,{default:u(()=>[t("section",A,[t("div",I,[t("div",N,[t("div",P,[d.value?(n(),f("div",j,"\u500B\u4EBA\u8CC7\u6599\u7BA1\u7406")):q("",!0),d.value?q("",!0):(n(),f("div",M,"\u4FEE\u6539\u8CC7\u6599")),i(C)]),W,d.value?(n(),g(h,{key:0,flat:"",bordered:"",class:"q-pa-md"},{default:u(()=>[Z,t("div",z,m(o._id),1),G,t("div",H,m(o.account),1),J,t("div",K,m(o.name),1),L,t("div",O,m(o.email),1),t("div",R,[i(c,{outline:"",class:"q-py-sm q-px-xxl text-subtitle2 q-mr-md",label:"\u767B\u51FA",color:"black",onClick:B(w)},null,8,["onClick"]),i(c,{label:"\u4FEE\u6539",class:"q-py-sm q-px-xxl text-subtitle2",unelevated:"",color:"black",onClick:e[0]||(e[0]=a=>V())})])]),_:1})):(n(),g(h,{key:1,flat:"",bordered:"",class:"col-3 row q-pa-md"},{default:u(()=>[i(E,{onSubmit:e[7]||(e[7]=F(a=>Q(),["prevent"]))},{default:u(()=>[T,i(x,{modelValue:s._id,"onUpdate:modelValue":e[1]||(e[1]=a=>s._id=a),readonly:"",rules:[r.required],color:"black"},null,8,["modelValue","rules"]),X,i(x,{modelValue:s.account,"onUpdate:modelValue":e[2]||(e[2]=a=>s.account=a),readonly:"",rules:[r.required],color:"black"},null,8,["modelValue","rules"]),Y,i(x,{modelValue:s.name,"onUpdate:modelValue":e[3]||(e[3]=a=>s.name=a),rules:[r.required],color:"black"},null,8,["modelValue","rules"]),ee,i(x,{modelValue:s.email,"onUpdate:modelValue":e[4]||(e[4]=a=>s.email=a),rules:[r.required],color:"black"},null,8,["modelValue","rules"]),te,i(D,{modelValue:s.image,"onUpdate:modelValue":e[5]||(e[5]=a=>s.image=a),rounded:"",standout:"",counter:"",label:l.$t("\u5716\u7247")},null,8,["modelValue","label"]),t("div",se,[i(c,{outline:"",class:"q-py-sm q-px-xxl text-subtitle2 q-mr-md",color:"black",label:"\u53D6\u6D88",onClick:e[6]||(e[6]=a=>y())}),i(c,{type:"submit",unelevated:"",class:"q-py-sm q-px-xxl text-subtitle2",color:"black",label:"\u78BA\u5B9A"})])]),_:1})]),_:1}))])])])]),_:1}))}};export{ue as default};
