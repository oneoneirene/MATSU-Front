import{u as oe,r as f,i as C,R as se,T as ie,o as c,a as D,e as l,w as s,U as w,S as b,d as i,f as ne,V as $,k as F,l as p,W as de,X as y,m as r,Y as A,j as v,t as V,Z as K,$ as re,a0 as me,a1 as ue,F as ce,a2 as pe,a3 as G,a4 as fe,a5 as be,a6 as ge,a7 as xe,a8 as _}from"./index.07b69943.js";import{Q as S}from"./QFile.d641f6eb.js";import{Q as q}from"./QCardSection.1c96db3a.js";import{Q as B}from"./QCardActions.8d58cc5e.js";import{Q as E}from"./QForm.6dd955da.js";import{Q as x}from"./QCard.0faac5b1.js";import{Q as ye,a as M,b as ve,c as Y}from"./QTabPanels.5907cbeb.js";import{Q as Ve}from"./QSpace.da0d9d81.js";import{Q as N}from"./QToggle.7d42b098.js";import{Q as I}from"./QAvatar.39d19618.js";import{Q as H,a as z,b as _e}from"./QTable.1bdaecd0.js";import{Q as we}from"./QSeparator.b8fcfd91.js";import{Q as he}from"./QSplitter.669c217d.js";import"./use-checkbox.d26f6c95.js";const qe={id:"q-app"},ke={class:"img",style:{margin:"auto"}},Qe={class:"container"},Ue={class:"row q-mt-none q-mt-lg-xl"},Ce={class:"col-12 col-lg-10"},De={class:"flex items-center text-center q-mb-lg q-mt-lg q-mt-lg-none"},$e={key:0,class:"text-h4 text-weight-medium"},Se={key:1,class:"text-h4 text-weight-medium"},Ee=i("div",{class:"text-body1 q-mb-md"},"\u500B\u4EBA\u8CC7\u8A0A\u9801\u9762",-1),Ie=i("div",{class:"text-subtitle1 text-weight-bold"},"ID:",-1),Te={class:"text-subtitle1 q-mb-md"},Fe=i("div",{class:"text-subtitle1 text-weight-bold"},"\u5E33\u865F:",-1),Ae={class:"text-subtitle1 q-mb-md"},Be=i("div",{class:"text-subtitle1 text-weight-bold"},"\u66B1\u7A31:",-1),Me={class:"text-subtitle1 q-mb-md"},Ne=i("div",{class:"text-subtitle1 text-weight-bold"},"\u96FB\u5B50\u90F5\u4EF6\u4FE1\u7BB1:",-1),ze={class:"text-subtitle1 q-mb-md"},Le={class:"q-my-xxl"},Pe=i("div",{class:"text-subtitle1 text-weight-medium"},"ID:",-1),je=i("div",{class:"text-subtitle1 text-weight-medium"},"\u5E33\u865F:",-1),Ke=i("div",{class:"text-subtitle1 text-weight-medium"},"\u66B1\u7A31:",-1),Ge=i("div",{class:"text-subtitle1 text-weight-medium"},"\u96FB\u5B50\u90F5\u4EF6\u4FE1\u7BB1:",-1),Ye=i("div",{class:"text-subtitle1 text-weight-medium"},"\u7167\u7247\u4E0A\u50B3:",-1),He={class:"q-my-xxl"},Je=i("div",{class:"text-h4 q-mb-md text-center"},"\u8CBC\u6587\u7BA1\u7406",-1),Oe={class:"row bg-blue",style:{height:"100px"}},Re={class:"row"},We={flat:"",class:"col",col:"10"},Xe={class:"row"},Ze={class:"col",col:"6"},el={class:"col",col:"6"},ll={class:"col",col:"12"},tl={class:"row"},al={class:"col",col:"12"},ol={class:"row"},sl={class:"col",col:"12"},il={class:"row"},nl={class:"col",col:"6"},dl={class:"q-pa-md"},rl=["src"],ml={class:"q-ml-sm text-center q-ml-md"},ul=["src"],cl={class:"flex",style:{"justify-content":"space-around"}},pl={class:"q-ml-sm text-center q-ml-md"},fl=i("div",{class:"text-h4 q-mb-md text-center"},"\u6536\u85CF\u7684\u6587\u7AE0",-1),bl={class:"q-pa-md"},Sl={__name:"UserPage",setup(gl){const J=oe(),{logout:O}=J,g=f(!0),R=()=>{g.value?g.value=!1:g.value=!0},k=C({required(a){return!!a||"\u5FC5\u586B"}}),u=C({_id:"",account:"",email:"",name:"",image:null,idx:-1});console.log(u.name);const d=C({_id:"",account:"",email:"",name:"",image:null,submitting:!1,idx:-1}),W=()=>{g.value=!1,d._id=u._id,d.name=u.name,d.account=u.account,d.email=u.email,d.image=u.image},h=async()=>{try{const{data:a}=await w.get("/users");u._id=a.result._id,u.account=a.result.account,u.email=a.result.email,u.name=a.result.name,u.image=a.result.image}catch(a){console.log(a),b.fire({icon:"error",title:"\u5931\u6557",text:a.isAxiosError?a.response.data.message:a.message})}};h();const X=async()=>{console.log(d);const a=new FormData;for(const e in d)a.append(e,d[e]);try{const{data:e}=await w.patch("/users",a);b.fire({icon:"success",title:"\u6210\u529F",text:"\u7DE8\u8F2F\u6210\u529F"}),h(),g.value=!0}catch(e){b.fire({icon:"error",title:"\u7DE8\u8F2F\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message})}};h();const m=[],Z=se(),Q=f("mails"),L=f(20);f(null),f(""),f(null),f(null),f(null),f(null),f(!1);const o=C({_id:"",account:"",email:"",name:"",image:null,submitting:!1,post:"",category:"",title:"",description:"",idx:-1,dialog:!1,valid:!1,startDay:"",endDay:"",sell:!1});console.log(o.name);const ee=[{name:"image",label:"Image"},{name:"name",required:!0,label:"Name",field:a=>a.name,sortable:!0},{name:"title",label:"Title",field:a=>a.title,sortable:!0},{name:"startDay",field:a=>a.startDay,label:"Start Day",sortable:!0},{name:"endDay",label:"End Day",field:a=>a.endDay,sortable:!0},{name:"edit",label:"Edit"}],T=a=>{o._id=a;const e=a===""?-1:m.findIndex(U=>U._id===a);e>-1?(o.name=m[e].name,o.sell=m[e].sell,o.description=m[e].description,o.title=m[e].title,o.startDay=m[e].startDay,o.endDay=m[e].endDay):(o.name="",o.sell=!1,o.description="",o.startDay="",o.endDay="",o.title=""),o.image=null,o.idx=e,o.dialog=!0,o.valid=!1,o.submitting=!1},P=async()=>{o.submitting=!0;const a=new FormData;for(const e in o)["_id","idx","dialog","valid","submitting"].includes(e)||a.append(e,o[e]);console.log(a);try{if(o._id.length===0){const{data:e}=await w.post("/exp/",a);m.push(e.result),b.fire({icon:"success",title:"\u6210\u529F",text:"\u65B0\u589E\u6210\u529F"})}else{const{data:e}=await w.patch("/exp/"+o._id,a);console.log("1234"),m[o.idx]=e.result,b.fire({icon:"success",title:"\u6210\u529F",text:"\u7DE8\u8F2F\u6210\u529F"}),h()}o.dialog=!1}catch(e){b.fire({icon:"success",title:"\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message})}o.submitting=!1},j=async a=>{try{await w.delete("/exp/"+a),await b.fire({icon:"success",title:"\u6210\u529F",text:"\u6D3B\u52D5\u522A\u9664\u6210\u529F"}),h()}catch{b.fire({icon:"error",title:"\u6D3B\u52D5\u522A\u9664\u5931\u6557",text:"\u6D3B\u52D5\u522A\u9664\u5931\u6557"})}},le=[{name:"names2",required:!0,label:"\u6587\u7AE0\u5206\u985E",align:"left",field:a=>a.name,format:a=>`${a}`,sortable:!0},{name:"calories",align:"center",label:"\u6587\u7AE0\u6A19\u984C",field:"calories",sortable:!0},{name:"fat",label:"\u56DE\u8986",field:"fat",sortable:!0},{name:"actions",label:"\u529F\u80FD",field:"actions"}],te=[{name:"Frozen Yogurt",calories:159,fat:6},{name:"Ice cream sandwich",calories:237,fat:9},{name:"Eclair",calories:262,fat:16},{name:"Cupcake",calories:305,fat:3.7},{name:"Gingerbread",calories:356,fat:16},{name:"Jelly bean",calories:375,fat:0},{name:"Lollipop",calories:392,fat:.2},{name:"Honeycomb",calories:408,fat:3.2},{name:"Donut",calories:452,fat:25},{name:"KitKat",calories:518,fat:26}],ae=async()=>{try{const{data:a}=await w.get("/exp/all");m.splice(0,m.length),m.push(...a.result)}catch(a){console.log(a),b.fire({icon:"error",title:"\u5931\u6557",text:a.isAxiosError?a.response.data.message:a.message})}};return console.log(m),ae(),(a,e)=>{const U=ie("q-card-action");return c(),D("div",null,[l(he,{modelValue:L.value,"onUpdate:modelValue":e[32]||(e[32]=t=>L.value=t),style:{height:"1000px"}},{before:s(()=>[l(ye,{modelValue:Q.value,"onUpdate:modelValue":e[6]||(e[6]=t=>Q.value=t),vertical:"",class:"text-teal"},{default:s(()=>[i("div",qe,[l(E,null,{default:s(()=>[i("div",ke,[l(ne,{src:o.image,"spinner-color":"white",style:{height:"300px"}},null,8,["src"])]),i("div",null,[l(S,{modelValue:o.image,"onUpdate:modelValue":[e[0]||(e[0]=t=>o.image=t),e[1]||(e[1]=t=>a.handleUpload())],"show-size":"",label:"\u9078\u64C7\u5716\u7247",filled:"",style:{"max-width":"400px",margin:"auto"}},null,8,["modelValue"])]),l($,{modelValue:o.dialog,"onUpdate:modelValue":e[5]||(e[5]=t=>o.dialog=t),persistent:""},{default:s(()=>[l(x,{style:{"min-width":"350px"}},{default:s(()=>[l(E,{onSubmit:F(P,["prevent"])},{default:s(()=>[l(q,null,{default:s(()=>[l(S,{modelValue:o.image,"onUpdate:modelValue":e[2]||(e[2]=t=>o.image=t),label:"IMAGE"},null,8,["modelValue"])]),_:1}),l(q,{class:"q-pt-none"},{default:s(()=>[l(p,{dense:"",modelValue:o.name,"onUpdate:modelValue":e[3]||(e[3]=t=>o.name=t),label:"NAME",autofocus:"",onKeyup:e[4]||(e[4]=de(t=>a.prompt=!1,["enter"]))},null,8,["modelValue"])]),_:1}),l(B,{align:"right",class:"text-primary"},{default:s(()=>[y(l(r,{flat:"",label:"Cancel"},null,512),[[_]]),y(l(r,{flat:"",type:"submit",label:"SUBMIT"},null,512),[[_]])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),l(M,{name:"mails",icon:"mail",label:"\u4FEE\u6539\u500B\u4EBA\u8CC7\u6599"}),l(M,{name:"alarms",icon:"alarm",label:"\u8CBC\u6587\u7BA1\u7406"}),l(M,{name:"movies",icon:"movie",label:"\u6211\u6536\u85CF\u7684\u6587\u7AE0"})]),_:1},8,["modelValue"])]),after:s(()=>[l(ve,{modelValue:Q.value,"onUpdate:modelValue":e[31]||(e[31]=t=>Q.value=t),animated:"",swipeable:"",vertical:"","transition-prev":"jump-up","transition-next":"jump-up"},{default:s(()=>[i("section",Qe,[i("div",Ue,[i("div",Ce,[i("div",De,[g.value?(c(),D("div",$e,"\u500B\u4EBA\u8CC7\u6599\u7BA1\u7406")):A("",!0),g.value?A("",!0):(c(),D("div",Se,"\u4FEE\u6539\u8CC7\u6599")),l(Ve)]),Ee,g.value?(c(),v(x,{key:0,flat:"",bordered:"",class:"q-pa-md"},{default:s(()=>[Ie,i("div",Te,V(u._id),1),Fe,i("div",Ae,V(u.account),1),Be,i("div",Me,V(u.name),1),Ne,i("div",ze,V(u.email),1),i("div",Le,[l(r,{outline:"",class:"q-py-sm q-px-xxl text-subtitle2 q-mr-md",label:"\u767B\u51FA",color:"black",onClick:K(O)},null,8,["onClick"]),l(r,{label:"\u4FEE\u6539",class:"q-py-sm q-px-xxl text-subtitle2",unelevated:"",color:"black",onClick:e[7]||(e[7]=t=>W())})])]),_:1})):(c(),v(x,{key:1,flat:"",bordered:"",class:"col-3 row q-pa-md"},{default:s(()=>[l(E,{onSubmit:e[14]||(e[14]=F(t=>X(),["prevent"]))},{default:s(()=>[Pe,l(p,{modelValue:d._id,"onUpdate:modelValue":e[8]||(e[8]=t=>d._id=t),readonly:"",rules:[k.required],color:"black"},null,8,["modelValue","rules"]),je,l(p,{modelValue:d.account,"onUpdate:modelValue":e[9]||(e[9]=t=>d.account=t),readonly:"",rules:[k.required],color:"black"},null,8,["modelValue","rules"]),Ke,l(p,{modelValue:d.name,"onUpdate:modelValue":e[10]||(e[10]=t=>d.name=t),rules:[k.required],color:"black"},null,8,["modelValue","rules"]),Ge,l(p,{modelValue:d.email,"onUpdate:modelValue":e[11]||(e[11]=t=>d.email=t),rules:[k.required],color:"black"},null,8,["modelValue","rules"]),Ye,l(S,{modelValue:d.image,"onUpdate:modelValue":e[12]||(e[12]=t=>d.image=t),rounded:"",standout:"",counter:"",label:a.$t("\u5716\u7247")},null,8,["modelValue","label"]),i("div",He,[l(r,{outline:"",class:"q-py-sm q-px-xxl text-subtitle2 q-mr-md",color:"black",label:"\u53D6\u6D88",onClick:e[13]||(e[13]=t=>R())}),l(r,{type:"submit",unelevated:"",class:"q-py-sm q-px-xxl text-subtitle2",color:"black",label:"\u78BA\u5B9A"})])]),_:1})]),_:1}))])])]),l(Y,{name:"alarms"},{default:s(()=>[Je,i("div",Oe,[l(r,{flat:"",fab:"",round:"","bg-blue":"",color:"white",icon:"mdi-plus",style:{width:"70px",height:"70px","margin-top":"15px","border-radius":"50%"},onClick:e[15]||(e[15]=t=>T(""))}),l($,{seamless:"",modelValue:o.dialog,"onUpdate:modelValue":e[24]||(e[24]=t=>o.dialog=t),persistent:""},{default:s(()=>[l(x,{id:"dialog"},{default:s(()=>[l(E,{modelValue:o.valid,"onUpdate:modelValue":e[23]||(e[23]=t=>o.valid=t),onSubmit:F(P,["prevent"])},{default:s(()=>[l(x,{flat:""},{default:s(()=>[i("div",Re,[i("div",We,[l(p,{rounded:"",flat:"",primary:"",standout:"",modelValue:o.name,"onUpdate:modelValue":e[16]||(e[16]=t=>o.name=t),label:a.$t("\u767C\u6587\u8005\u540D\u7A31"),class:"q-ma-md"},null,8,["modelValue","label"])])]),i("div",Xe,[i("div",Ze,[l(p,{rounded:"",flat:"",primary:"",standout:"",modelValue:o.startDay,"onUpdate:modelValue":e[17]||(e[17]=t=>o.startDay=t),label:a.$t("\u958B\u59CB\u65E5\u671F"),class:"q-ma-md",style:{"box-shadow":"none"}},null,8,["modelValue","label"])]),i("div",el,[l(p,{rounded:"",flat:"",primary:"",standout:"",modelValue:o.endDay,"onUpdate:modelValue":e[18]||(e[18]=t=>o.endDay=t),label:a.$t("\u7D50\u675F\u65E5\u671F"),class:"q-ma-md",style:{"box-shadow":"none"}},null,8,["modelValue","label"])])]),i("div",ll,[l(p,{rounded:"",flat:"",primary:"",standout:"",modelValue:o.title,"onUpdate:modelValue":e[19]||(e[19]=t=>o.title=t),label:a.$t("\u6A19\u984C"),class:"q-ma-md",style:{"box-shadow":"none"}},null,8,["modelValue","label"])]),i("div",tl,[i("div",al,[l(p,{modelValue:o.description,"onUpdate:modelValue":e[20]||(e[20]=t=>o.description=t),class:"q-ma-md",style:{"box-shadow":"none"},rounded:"",standout:"",label:"\u64B0\u5BEB\u5FC3\u5F97",autogrow:"",type:"textarea"},null,8,["modelValue"])])]),i("div",ol,[i("div",sl,[l(S,{modelValue:o.image,"onUpdate:modelValue":e[21]||(e[21]=t=>o.image=t),rounded:"",standout:"",counter:"",class:"q-ma-md",style:{"box-shadow":"none"},label:a.$t("\u5FC3\u5F97\u5716\u7247")},null,8,["modelValue","label"])])]),i("div",il,[i("div",nl,[l(N,{"false-value":!1,label:`On the Shelf - ${o.sell}`,"true-value":!0,color:"green","toggle-indeterminate":"false",modelValue:o.sell,"onUpdate:modelValue":e[22]||(e[22]=t=>o.sell=t)},null,8,["label","modelValue"])])]),l(U,{class:"text-center"},{default:s(()=>[y(l(r,{type:"sumbit",label:a.$t("submit"),color:"primary",loading:o.submitting},null,8,["label","loading"]),[[_]])]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1},8,["modelValue"])]),i("div",dl,[l(H,{grid:K(Z).screen.lt.md,title:a.$t("\u793E\u5340\u516C\u544A"),rows:m,columns:ee,"row-key":"name",filter:a.filter,selection:"multiple",selected:a.selected,"onUpdate:selected":e[30]||(e[30]=t=>a.selected=t)},{"top-right":s(()=>[l(p,{borderless:"",dense:"",debounce:"300",modelValue:a.filter,"onUpdate:modelValue":e[25]||(e[25]=t=>a.filter=t),placeholder:"Search"},{append:s(()=>[l(re,{name:"search"})]),_:1},8,["modelValue"])]),"header-selection":s(t=>[(c(),v(N,{modelValue:t.selected,"onUpdate:modelValue":n=>t.selected=n,key:m.sell},null,8,["modelValue","onUpdate:modelValue"]))]),"body-selection":s(t=>[(c(),v(N,{modelValue:t.selected,"onUpdate:modelValue":n=>t.selected=n,key:m.sell},null,8,["modelValue","onUpdate:modelValue"]))]),"body-cell-image":s(t=>[l(z,{style:{"text-align":"right"}},{default:s(()=>[l(I,null,{default:s(()=>[i("img",{src:t.row.image,alt:""},null,8,rl)]),_:2},1024)]),_:2},1024)]),"body-cell-edit":s(t=>[l(z,{style:{"text-align":"right"}},{default:s(()=>[l(r,{round:"",class:"bg-accent",style:{width:"50px",height:"50px"},onClick:n=>T(t.row._id),icon:"mdi-circle-edit-outline"},null,8,["onClick"]),l(r,{round:"",class:"bg-red",style:{width:"50px",height:"50px"},onClick:e[26]||(e[26]=n=>a.confirm=!0),icon:"mdi-delete"})]),_:2},1024),l($,{modelValue:a.confirm,"onUpdate:modelValue":e[27]||(e[27]=n=>a.confirm=n),persistent:""},{default:s(()=>[l(x,null,{default:s(()=>[l(q,{class:"row items-center"},{default:s(()=>[l(I,{icon:"mdi-account-arrow-right",color:"primary","text-color":"white"}),i("span",ml,V(a.$t("Delete"))+" ?",1)]),_:1}),l(B,{align:"right"},{default:s(()=>[y(l(r,{flat:"",color:"primary",icon:"mdi-check-circle",onClick:n=>j(t.row._id)},null,8,["onClick"]),[[_]]),y(l(r,{flat:"",color:"primary",icon:"mdi-close-circle"},null,512),[[_]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),item:s(t=>[i("div",{class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition",style:me(t.selected?"transform: scale(0.95);":"")},[l(x,{class:ue(t.selected?"bg-grey-2":"")},{default:s(()=>[l(q,null,{default:s(()=>[l(_e,{dense:"",modelValue:t.selected,"onUpdate:modelValue":n=>t.selected=n,label:t.row.name},null,8,["modelValue","onUpdate:modelValue","label"])]),_:2},1024),l(we),(c(!0),D(ce,null,pe(t.cols,n=>(c(),v(xe,{key:n.name},{default:s(()=>[l(G,{class:"text-center"},{default:s(()=>[l(fe,{class:"text-center q-mx-auto"},{default:s(()=>[l(G,null,{default:s(()=>[n.name!=="image"?(c(),v(be,{key:0,caption:"",class:"text-center q-mx-auto"},{default:s(()=>[ge(V(n.value),1)]),_:2},1024)):n.name=="image"?(c(),v(I,{key:1,square:"",size:"200px",class:"text-center q-mx-auto"},{default:s(()=>[i("img",{src:t.row[n.name],alt:""},null,8,ul)]),_:2},1024)):A("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),l(U,{class:"q-mx-auto text-center"},{default:s(()=>[i("div",cl,[l(r,{rounded:"",class:"text-center bg-red",onClick:e[28]||(e[28]=n=>a.confirmSm=!0),icon:"mdi-delete",style:{width:"50px",height:"50px"}}),l(r,{rounded:"",class:"text-center bg-accent",onClick:n=>T(t.row._id),icon:"mdi-circle-edit-outline",style:{width:"50px",height:"50px"}},null,8,["onClick"])])]),_:2},1024)]),_:2},1032,["class"]),l($,{modelValue:a.confirmSm,"onUpdate:modelValue":e[29]||(e[29]=n=>a.confirmSm=n),persistent:""},{default:s(()=>[l(x,null,{default:s(()=>[l(q,{class:"row items-center"},{default:s(()=>[l(I,{icon:"mdi-account-arrow-right",color:"primary","text-color":"white"}),i("span",pl,V(a.$t("Delete"))+" ?",1)]),_:1}),l(B,{align:"right"},{default:s(()=>[y(l(r,{flat:"",color:"primary",icon:"mdi-check-circle",onClick:n=>j(t.row._id)},null,8,["onClick"]),[[_]]),y(l(r,{flat:"",color:"primary",icon:"mdi-close-circle"},null,512),[[_]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])],4)]),_:1},8,["grid","title","filter","selected"])])]),_:1}),l(Y,{name:"movies"},{default:s(()=>[fl,i("div",bl,[l(H,{title:"My Likes",rows:te,columns:le,"row-key":"name2"},{"body-cell-actions":s(t=>[l(z,{props:t},{default:s(()=>[l(r,{icon:"mdi-heart",onClick:n=>a.onEdit(t.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1})])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])}}};export{Sl as default};
