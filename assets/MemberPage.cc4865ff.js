import{r as d,i as Q,o as _,a as h,e as a,w as r,U as p,S as c,l as v,$ as y,m,V as x,a0 as V,d as C,t as k,X as f,a9 as g}from"./index.7330503a.js";import{Q as q}from"./QCardSection.c06a5993.js";import{Q as A}from"./QCardActions.ccd9d664.js";import{Q as S}from"./QCard.afb4b7c6.js";import{Q as B,a as D}from"./QTable.128d1128.js";import"./QSeparator.05626903.js";import"./use-checkbox.40f7f315.js";const U={class:"q-pa-md"},$={class:"q-ml-sm text-center q-ml-md"},z={__name:"MemberPage",setup(E){const s=d(""),i=d(!1),o=Q([]),b=[{name:"name",required:!0,label:"Name",align:"left",field:e=>e.name,sortable:!0},{name:"account",align:"center",label:"account",field:e=>e.account,sortable:!0},{name:"email",label:"email",field:e=>e.email,required:!0,sortable:!0},{name:"actions",label:"\u529F\u80FD"}],w=async e=>{try{await p.delete("/users/"+e),await c.fire({icon:"success",title:"\u6210\u529F",text:"\u522A\u9664\u6210\u529F"}),u()}catch(t){c.fire({icon:"error",title:"\u522A\u9664\u5931\u6557",text:t.isAxiosError?t.response.data.message:t.message})}},u=async()=>{try{const{data:e}=await p.get("/users/all");o.splice(0,o.length),o.push(...e.result),console.log(o)}catch(e){console.log(e),c.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message})}};return u(),(e,t)=>(_(),h("div",U,[a(B,{title:"Treats",rows:o,columns:b,filter:s.value,"row-key":"name","binary-state-sort":""},{"top-right":r(()=>[a(v,{borderless:"",dense:"",debounce:"300",modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=l=>s.value=l),placeholder:"Search"},{append:r(()=>[a(y,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-actions":r(l=>[a(D,{props:l},{default:r(()=>[a(m,{icon:"delete",color:"blue",onClick:t[1]||(t[1]=n=>i.value=!0)}),a(x,{modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=n=>i.value=n),persistent:""},{default:r(()=>[a(S,null,{default:r(()=>[a(q,{class:"row items-center"},{default:r(()=>[a(V,{icon:"mdi-account-arrow-right",color:"primary","text-color":"white"}),C("span",$,k(e.$t("Delete"))+" ?",1)]),_:1}),a(A,{align:"right"},{default:r(()=>[f(a(m,{flat:"",color:"primary",icon:"mdi-check-circle",onClick:n=>w(l.row._id)},null,8,["onClick"]),[[g]]),f(a(m,{flat:"",color:"primary",icon:"mdi-close-circle"},null,512),[[g]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1032,["props"])]),_:1},8,["rows","filter"])]))}};export{z as default};
